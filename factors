#!/usr/bin/env python3

import sys
import math
import time

def main(file_path):
    start_time = time.time()
    with open(file_path, 'r') as file:
        for line in file:
            if time.time() - start_time > 5:
                print("Time limit exceeded.")
                break

            number = int(line.strip())
            factor1, factor2 = factorize_first_pair(number)
            if factor1 and factor2:
                print(f"{number}={factor1}*{factor2}")
            else:
                print(f"{number} is prime or has factors larger than sqrt(number)")

def factorize_first_pair(n):
    if n % 2 == 0:
        return 2, n // 2

    sqrt_n = int(math.sqrt(n)) + 1
    for i in range(3, sqrt_n, 2):
        if n % i == 0:
            return i, n // i
    return None, None

if __name__ == '__main__':
    if len(sys.argv) != 2:
        print('Usage: ./factors <file>')
        sys.exit(1)
    main(sys.argv[1])
